
                    if items[index].isExpanded {
                        // Show real item details instead of mock data
                        ForEach(items[index].items.indices, id: \.self) { itemIndex in
                            let item = items[index].items[itemIndex]
                            
                            VStack(alignment: .leading, spacing: 8) {
                                // Item name
                                Text(item.name)
                                    .font(.subheadline)
                                    .fontWeight(.medium)
                                    .foregroundColor(.black)
                                
                                // Item details in rows
                                HStack {
                                    VStack(alignment: .leading, spacing: 2) {
                                        Text("UPC:")
                                            .font(.caption)
                                            .foregroundColor(.gray)
                                        Text("\(item.upc)")
                                            .font(.caption)
                                            .fontWeight(.medium)
                                    }
                                    
                                    Spacer()
                                    
                                    VStack(alignment: .leading, spacing: 2) {
                                        Text("Expected:")
                                            .font(.caption)
                                            .foregroundColor(.gray)
                                        Text("Position \(item.position)")
                                            .font(.caption)
                                            .fontWeight(.medium)
                                    }
                                }
                                
                                // Add divider between items except for the last one
                                if itemIndex < items[index].items.count - 1 {
                                    Divider()
                                        .padding(.top, 4)
                                }
                            }
                            .padding(.leading, 16)
                            .padding(.vertical, 8)
                            .transition(.opacity.combined(with: .slide))
                        }
                    }
                }
                .padding(.vertical, 8)
